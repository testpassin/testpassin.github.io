<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <meta name="description" content="Melbourne Vic And Sydney Nsw Weekly Passin (Passed In) House On Google Maps."/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <!--
  <meta name="viewport" content="width=device-width">
  -->
  <title>Auction Result Passin House Map VIC Melbourne Australia</title> 
  <style type="text/css">
  html, body { height:100%; width:100%; margin: 0px; padding: 0px}
  </style>
  <!--
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
  -->
  <script src="https://maps.googleapis.com/maps/api/js"></script>
  <style>
    #legend {
      padding: 10px;
    }
  </style>
</head> 
<body>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-71358081-2', 'auto');
    ga('send', 'pageview');
  
  </script>
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5BWTJ5"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5BWTJ5');</script>
  <!-- End Google Tag Manager -->
  <div id="legend">
      <form id="select_form">
        <select id="state_list">
          <option value="vic" selected="selected">VIC</option>
          <option value="nsw">NSW</option>
        </select>
        <select id="date_list">
          <option value="2015/December/20" selected="selected">2015/December/20</option>
          <option value="2015/December/13"">2015/December/13</option>
          <option value="2015/December/6">2015/December/6</option>
          <option value="2015/November/29">2015/November/29</option>
        </select>
      </form>
  </div>
  <div id="map" style="width:100%; height:100%;"></div>

  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script type="text/javascript">

    var map;

    function initialize() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: new google.maps.LatLng(-37.8180, 144.9760),
          streetViewControl: true,
          scaleControl: true, 
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            position: google.maps.ControlPosition.BOTTOM_CENTER
          },
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        map.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById('legend'));
    }

    var markers  = [];
    var i;

    function clean_markers() {
      //console.log(markers.length);
      for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
      }

      markers = [];
    }

    $('#date_list').on('change', function() {
      //console.log("data/"+$('#state_list').val()+"/"+this.value+"/show.js");
      clean_markers();

      var infowindow = new google.maps.InfoWindow();


      $.getScript( "data/"+$('#state_list').val()+"/"+this.value+"/show.js", function( data, textStatus, jqxhr ) {
        //console.log( data ); // Data returned
        //console.log( textStatus ); // Success
        //console.log( jqxhr.status ); // 200
        //console.log( "Load was performed." );


        for (i = 0; i < locations.length; i++) {  
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });

          markers.push(marker);

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
            }
          })(marker, i));
        }

        google.maps.event.trigger(map, 'resize');

      });
    });

    initialize();
    $( "#date_list" ).trigger( "change" );

    console.log("version: 1.11");
  </script>
</body>
</html>
