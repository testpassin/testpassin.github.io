<!DOCTYPE html>
<html> 
<head> 
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
  <meta name="description" content="Australia Melbourne Vic Weekly Passin House and Passed In House On Map."/>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <title>Passin House and Passed In House On Map VIC Melbourne Australia</title> 
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <script src="https://maps.googleapis.com/maps/api/js"></script>
  <style>
    html {
      height: 100%
    }
    		
    body {
      height: 100%;
      margin: 0;
      padding: 0
    }

    #legend {
      padding: 10px;
    }

  </style>
</head> 
<body>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-71358081-2', 'auto');
    ga('send', 'pageview');
  
  </script>
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5BWTJ5"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5BWTJ5');</script>
  <!-- End Google Tag Manager -->
  <div id="legend">
      <form id="select_form">
        <a id="disclaimer" href="#disclaimerModal" data-toggle="modal">Disclaimer</a>
        <select id="state_list">
          <option value="vic" selected="selected">VIC</option>
          <option value="nsw">NSW</option>
        </select>
        <select id="date_list">
          <option value="2015/December/20" selected="selected">2015/December/20</option>
          <option value="2015/December/13">2015/December/13</option>
          <option value="2015/December/6">2015/December/6</option>
          <option value="2015/November/29">2015/November/29</option>
        </select>
      </form>
  </div>
  <div id="map" style="width:100%; height:100%;"></div>


  <div class="modal fade" id="disclaimerModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Disclaimer</h4>
        </div>
        <div class="modal-body">
          <p>
          Every reasonable effort has been made to ensure the accuracy of the data. The data utilized is updated periodically and therefore 
          may not reflect the most current information. When possible, data refresh information will be posted.
          </p>
          <p>
          MELBOURNESCHOOLZONES.COM MAKES NO WARRANTY OF MERCHANTABILITY OR WARRANTY FOR FITNESS OF USE FOR A PARTICULAR PURPOSE, 
          EXPRESSED OR IMPLIED, WITH RESPECT TO THIS APPLICATION OR THE UNDERLYING DATA. Any users of this tool or the data, 
          accepts same AS IS, WITH ALL FAULTS, and assumes all responsibility for the use thereof, and further covenants and agrees 
          to hold melbourneschoolzones.com harmless from and against all damage, loss,or liability arising from any use of this tool.
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script type="text/javascript">

    var map;

    function initialize() {
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 12,
          center: new google.maps.LatLng(-37.8180, 144.9760),
          streetViewControl: true,
          scaleControl: true, 
          mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
            position: google.maps.ControlPosition.BOTTOM_CENTER
          },
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        map.controls[google.maps.ControlPosition.TOP_CENTER].push(document.getElementById('legend'));
    }

    var markers  = [];
    var i;

    function clean_markers() {
      //console.log(markers.length);
      for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
      }

      markers = [];
    }

    $('#date_list').on('change', function() {
      //console.log("data/"+$('#state_list').val()+"/"+this.value+"/show.js");
      clean_markers();

      var infowindow = new google.maps.InfoWindow();


      $.getScript( "data/"+$('#state_list').val()+"/"+this.value+"/show.js", function( data, textStatus, jqxhr ) {
        //console.log( data ); // Data returned
        //console.log( textStatus ); // Success
        //console.log( jqxhr.status ); // 200
        //console.log( "Load was performed." );


        for (i = 0; i < locations.length; i++) {  
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });

          markers.push(marker);

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
            }
          })(marker, i));
        }

        google.maps.event.trigger(map, 'resize');

      });
    });

    initialize();
    $( "#date_list" ).trigger( "change" );

    console.log("version: 1.13");
  </script>
</body>
</html>
